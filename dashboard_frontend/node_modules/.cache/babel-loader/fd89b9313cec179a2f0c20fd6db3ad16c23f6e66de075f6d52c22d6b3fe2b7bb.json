{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AccountSummary(){var _summary$active_trade,_summary$allocated;const[summary,setSummary]=useState(null);useEffect(()=>{fetch(\"/fork/metrics\").then(res=>res.json()).then(data=>setSummary(data.summary)).catch(err=>console.error(\"Error loading account summary:\",err));},[]);const normalizeTo=25000;const formatUSD=value=>{return value===null||value===void 0?void 0:value.toLocaleString(\"en-US\",{style:\"currency\",currency:\"USD\",maximumFractionDigits:2});};const getTodayChangePct=()=>{if(!(summary!==null&&summary!==void 0&&summary.balance)||!(summary!==null&&summary!==void 0&&summary.today_pnl))return\"0.00%\";const pct=summary.today_pnl/summary.balance*100;return`${pct>=0?\"+\":\"\"}${pct.toFixed(2)}%`;};const getNormalizedBalance=()=>{if(!summary)return 0;return normalizeTo+summary.total_pnl;};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded-2xl p-6 shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-2 text-white\",children:\"Account Summary\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl md:text-4xl font-bold text-white\",children:formatUSD(getNormalizedBalance())}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-2 text-sm mt-4 text-gray-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-white font-semibold\",children:(_summary$active_trade=summary===null||summary===void 0?void 0:summary.active_trades)!==null&&_summary$active_trade!==void 0?_summary$active_trade:0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs\",children:\"Active\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:`font-semibold ${(summary===null||summary===void 0?void 0:summary.today_pnl)>=0?\"text-green-400\":\"text-red-400\"}`,children:getTodayChangePct()}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs\",children:\"Today\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-white font-semibold\",children:formatUSD((_summary$allocated=summary===null||summary===void 0?void 0:summary.allocated)!==null&&_summary$allocated!==void 0?_summary$allocated:0)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs\",children:\"Allocated\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2 text-xs mt-4 text-gray-400\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-left\",children:[\"uPnL: \",formatUSD(summary===null||summary===void 0?void 0:summary.upnl)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[\"Today's PnL: \",formatUSD(summary===null||summary===void 0?void 0:summary.today_pnl)]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","AccountSummary","_summary$active_trade","_summary$allocated","summary","setSummary","fetch","then","res","json","data","catch","err","console","error","normalizeTo","formatUSD","value","toLocaleString","style","currency","maximumFractionDigits","getTodayChangePct","balance","today_pnl","pct","toFixed","getNormalizedBalance","total_pnl","className","children","active_trades","allocated","upnl"],"sources":["/home/signal/market7/dashboard_frontend/src/components/AccountSummary.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nexport default function AccountSummary() {\n  const [summary, setSummary] = useState(null);\n\n  useEffect(() => {\n    fetch(\"/fork/metrics\")\n      .then((res) => res.json())\n      .then((data) => setSummary(data.summary))\n      .catch((err) => console.error(\"Error loading account summary:\", err));\n  }, []);\n\n  const normalizeTo = 25000;\n\n  const formatUSD = (value) => {\n    return value?.toLocaleString(\"en-US\", {\n      style: \"currency\",\n      currency: \"USD\",\n      maximumFractionDigits: 2,\n    });\n  };\n\n  const getTodayChangePct = () => {\n    if (!summary?.balance || !summary?.today_pnl) return \"0.00%\";\n    const pct = (summary.today_pnl / summary.balance) * 100;\n    return `${pct >= 0 ? \"+\" : \"\"}${pct.toFixed(2)}%`;\n  };\n\n  const getNormalizedBalance = () => {\n    if (!summary) return 0;\n    return normalizeTo + summary.total_pnl;\n  };\n\n  return (\n    <div className=\"bg-gray-800 rounded-2xl p-6 shadow-md\">\n      <h3 className=\"text-lg font-semibold mb-2 text-white\">Account Summary</h3>\n\n      <div className=\"text-3xl md:text-4xl font-bold text-white\">\n        {formatUSD(getNormalizedBalance())}\n      </div>\n\n      <div className=\"grid grid-cols-3 gap-2 text-sm mt-4 text-gray-300\">\n        <div className=\"text-center\">\n          <div className=\"text-white font-semibold\">\n            {summary?.active_trades ?? 0}\n          </div>\n          <div className=\"text-xs\">Active</div>\n        </div>\n\n        <div className=\"text-center\">\n          <div className={`font-semibold ${summary?.today_pnl >= 0 ? \"text-green-400\" : \"text-red-400\"}`}>\n            {getTodayChangePct()}\n          </div>\n          <div className=\"text-xs\">Today</div>\n        </div>\n\n        <div className=\"text-center\">\n          <div className=\"text-white font-semibold\">\n            {formatUSD(summary?.allocated ?? 0)}\n          </div>\n          <div className=\"text-xs\">Allocated</div>\n        </div>\n      </div>\n\n      {/* Optional Expanded PnL Metrics */}\n      <div className=\"grid grid-cols-2 gap-2 text-xs mt-4 text-gray-400\">\n        <div className=\"text-left\">uPnL: {formatUSD(summary?.upnl)}</div>\n        <div className=\"text-right\">Today's PnL: {formatUSD(summary?.today_pnl)}</div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}