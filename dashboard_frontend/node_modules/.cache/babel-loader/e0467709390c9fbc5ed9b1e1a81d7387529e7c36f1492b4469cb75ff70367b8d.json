{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Minus,Signal,MoveUpRight,Frown,Smile,Meh}from\"lucide-react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MarketSentiment(){const[data,setData]=useState(null);useEffect(()=>{fetch(\"/api/btc/context\").then(res=>{if(!res.ok)throw new Error(\"Network response was not ok\");return res.json();}).then(res=>{var _res$status;setData({status:((_res$status=res.status)===null||_res$status===void 0?void 0:_res$status.toUpperCase())||\"UNKNOWN\",rsi:parseFloat(res.rsi).toFixed(1),adx:parseFloat(res.adx).toFixed(1),emaRelation:res.close>res.ema?\"Above EMA50\":\"Below EMA50\"// dominance: res.dominance, // ← future use\n});}).catch(err=>{console.error(\"Failed to fetch BTC sentiment:\",err);setData(null);});},[]);const statusColor=(data===null||data===void 0?void 0:data.status)===\"BULLISH\"?\"text-green-400\":(data===null||data===void 0?void 0:data.status)===\"BEARISH\"?\"text-red-400\":\"text-yellow-400\";const statusIcon=(data===null||data===void 0?void 0:data.status)===\"BULLISH\"?/*#__PURE__*/_jsx(Smile,{className:\"w-6 h-6 text-green-400\"}):(data===null||data===void 0?void 0:data.status)===\"BEARISH\"?/*#__PURE__*/_jsx(Frown,{className:\"w-6 h-6 text-red-400\"}):/*#__PURE__*/_jsx(Meh,{className:\"w-6 h-6 text-yellow-400\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-gray-800 rounded-2xl p-4 shadow-md overflow-hidden border border-white/20\",style:{minHeight:\"160px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/img/world.svg\",alt:\"World Map\",className:\"absolute inset-0 opacity-10 object-cover w-full h-full pointer-events-none\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10 flex flex-col h-full justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-sm text-gray-300 font-medium mb-1\",children:\"Market Sentiment & BTC Health\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 text-lg font-bold\",children:[statusIcon,/*#__PURE__*/_jsx(\"span\",{className:`${statusColor} text-xl`,children:(data===null||data===void 0?void 0:data.status)||\"Loading...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-sm text-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Minus,{className:\"w-4 h-4 text-gray-300\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"RSI: \",(data===null||data===void 0?void 0:data.rsi)||\"—\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Signal,{className:\"w-4 h-4 text-gray-300\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"ADX: \",(data===null||data===void 0?void 0:data.adx)||\"—\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(MoveUpRight,{className:\"w-4 h-4 text-green-400\"}),/*#__PURE__*/_jsx(\"span\",{children:(data===null||data===void 0?void 0:data.emaRelation)||\"—\"})]})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Minus","Signal","MoveUpRight","Frown","Smile","Meh","jsx","_jsx","jsxs","_jsxs","MarketSentiment","data","setData","fetch","then","res","ok","Error","json","_res$status","status","toUpperCase","rsi","parseFloat","toFixed","adx","emaRelation","close","ema","catch","err","console","error","statusColor","statusIcon","className","style","minHeight","children","src","alt"],"sources":["/home/signal/market7/dashboard_frontend/src/components/MarketSentiment.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Minus, Signal, MoveUpRight, Frown, Smile, Meh } from \"lucide-react\";\n\nexport default function MarketSentiment() {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    fetch(\"/api/btc/context\")\n      .then((res) => {\n        if (!res.ok) throw new Error(\"Network response was not ok\");\n        return res.json();\n      })\n      .then((res) => {\n        setData({\n          status: res.status?.toUpperCase() || \"UNKNOWN\",\n          rsi: parseFloat(res.rsi).toFixed(1),\n          adx: parseFloat(res.adx).toFixed(1),\n          emaRelation: res.close > res.ema ? \"Above EMA50\" : \"Below EMA50\",\n          // dominance: res.dominance, // ← future use\n        });\n      })\n      .catch((err) => {\n        console.error(\"Failed to fetch BTC sentiment:\", err);\n        setData(null);\n      });\n  }, []);\n\n  const statusColor =\n    data?.status === \"BULLISH\"\n      ? \"text-green-400\"\n      : data?.status === \"BEARISH\"\n      ? \"text-red-400\"\n      : \"text-yellow-400\";\n\n  const statusIcon =\n    data?.status === \"BULLISH\" ? (\n      <Smile className=\"w-6 h-6 text-green-400\" />\n    ) : data?.status === \"BEARISH\" ? (\n      <Frown className=\"w-6 h-6 text-red-400\" />\n    ) : (\n      <Meh className=\"w-6 h-6 text-yellow-400\" />\n    );\n\n  return (\n    <div\n      className=\"relative bg-gray-800 rounded-2xl p-4 shadow-md overflow-hidden border border-white/20\"\n      style={{ minHeight: \"160px\" }}\n    >\n      {/* Background globe */}\n      <img\n        src=\"/img/world.svg\"\n        alt=\"World Map\"\n        className=\"absolute inset-0 opacity-10 object-cover w-full h-full pointer-events-none\"\n      />\n\n      <div className=\"relative z-10 flex flex-col h-full justify-between\">\n        {/* Title + Sentiment */}\n        <div className=\"mb-2\">\n          <h2 className=\"text-sm text-gray-300 font-medium mb-1\">\n            Market Sentiment & BTC Health\n          </h2>\n          <div className=\"flex items-center gap-3 text-lg font-bold\">\n            {statusIcon}\n            <span className={`${statusColor} text-xl`}>\n              {data?.status || \"Loading...\"}\n            </span>\n          </div>\n        </div>\n\n        {/* Indicators */}\n        <div className=\"space-y-1 text-sm text-gray-200\">\n          <div className=\"flex items-center gap-2\">\n            <Minus className=\"w-4 h-4 text-gray-300\" />\n            <span>RSI: {data?.rsi || \"—\"}</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Signal className=\"w-4 h-4 text-gray-300\" />\n            <span>ADX: {data?.adx || \"—\"}</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <MoveUpRight className=\"w-4 h-4 text-green-400\" />\n            <span>{data?.emaRelation || \"—\"}</span>\n          </div>\n          {/* <div className=\"flex items-center gap-2\">\n            <Globe className=\"w-4 h-4 text-blue-300\" />\n            <span>Dominance: {data?.dominance || \"—\"}</span>\n          </div> */}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,KAAK,CAAEC,MAAM,CAAEC,WAAW,CAAEC,KAAK,CAAEC,KAAK,CAAEC,GAAG,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7E,cAAe,SAAS,CAAAC,eAAeA,CAAA,CAAG,CACxC,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAEtCD,SAAS,CAAC,IAAM,CACde,KAAK,CAAC,kBAAkB,CAAC,CACtBC,IAAI,CAAEC,GAAG,EAAK,CACb,GAAI,CAACA,GAAG,CAACC,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,6BAA6B,CAAC,CAC3D,MAAO,CAAAF,GAAG,CAACG,IAAI,CAAC,CAAC,CACnB,CAAC,CAAC,CACDJ,IAAI,CAAEC,GAAG,EAAK,KAAAI,WAAA,CACbP,OAAO,CAAC,CACNQ,MAAM,CAAE,EAAAD,WAAA,CAAAJ,GAAG,CAACK,MAAM,UAAAD,WAAA,iBAAVA,WAAA,CAAYE,WAAW,CAAC,CAAC,GAAI,SAAS,CAC9CC,GAAG,CAAEC,UAAU,CAACR,GAAG,CAACO,GAAG,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC,CACnCC,GAAG,CAAEF,UAAU,CAACR,GAAG,CAACU,GAAG,CAAC,CAACD,OAAO,CAAC,CAAC,CAAC,CACnCE,WAAW,CAAEX,GAAG,CAACY,KAAK,CAAGZ,GAAG,CAACa,GAAG,CAAG,aAAa,CAAG,aACnD;AACF,CAAC,CAAC,CACJ,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,EAAK,CACdC,OAAO,CAACC,KAAK,CAAC,gCAAgC,CAAEF,GAAG,CAAC,CACpDlB,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAqB,WAAW,CACf,CAAAtB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAES,MAAM,IAAK,SAAS,CACtB,gBAAgB,CAChB,CAAAT,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAES,MAAM,IAAK,SAAS,CAC1B,cAAc,CACd,iBAAiB,CAEvB,KAAM,CAAAc,UAAU,CACd,CAAAvB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAES,MAAM,IAAK,SAAS,cACxBb,IAAA,CAACH,KAAK,EAAC+B,SAAS,CAAC,wBAAwB,CAAE,CAAC,CAC1C,CAAAxB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAES,MAAM,IAAK,SAAS,cAC5Bb,IAAA,CAACJ,KAAK,EAACgC,SAAS,CAAC,sBAAsB,CAAE,CAAC,cAE1C5B,IAAA,CAACF,GAAG,EAAC8B,SAAS,CAAC,yBAAyB,CAAE,CAC3C,CAEH,mBACE1B,KAAA,QACE0B,SAAS,CAAC,uFAAuF,CACjGC,KAAK,CAAE,CAAEC,SAAS,CAAE,OAAQ,CAAE,CAAAC,QAAA,eAG9B/B,IAAA,QACEgC,GAAG,CAAC,gBAAgB,CACpBC,GAAG,CAAC,WAAW,CACfL,SAAS,CAAC,4EAA4E,CACvF,CAAC,cAEF1B,KAAA,QAAK0B,SAAS,CAAC,oDAAoD,CAAAG,QAAA,eAEjE7B,KAAA,QAAK0B,SAAS,CAAC,MAAM,CAAAG,QAAA,eACnB/B,IAAA,OAAI4B,SAAS,CAAC,wCAAwC,CAAAG,QAAA,CAAC,+BAEvD,CAAI,CAAC,cACL7B,KAAA,QAAK0B,SAAS,CAAC,2CAA2C,CAAAG,QAAA,EACvDJ,UAAU,cACX3B,IAAA,SAAM4B,SAAS,CAAE,GAAGF,WAAW,UAAW,CAAAK,QAAA,CACvC,CAAA3B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAES,MAAM,GAAI,YAAY,CACzB,CAAC,EACJ,CAAC,EACH,CAAC,cAGNX,KAAA,QAAK0B,SAAS,CAAC,iCAAiC,CAAAG,QAAA,eAC9C7B,KAAA,QAAK0B,SAAS,CAAC,yBAAyB,CAAAG,QAAA,eACtC/B,IAAA,CAACP,KAAK,EAACmC,SAAS,CAAC,uBAAuB,CAAE,CAAC,cAC3C1B,KAAA,SAAA6B,QAAA,EAAM,OAAK,CAAC,CAAA3B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEW,GAAG,GAAI,GAAG,EAAO,CAAC,EACjC,CAAC,cACNb,KAAA,QAAK0B,SAAS,CAAC,yBAAyB,CAAAG,QAAA,eACtC/B,IAAA,CAACN,MAAM,EAACkC,SAAS,CAAC,uBAAuB,CAAE,CAAC,cAC5C1B,KAAA,SAAA6B,QAAA,EAAM,OAAK,CAAC,CAAA3B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEc,GAAG,GAAI,GAAG,EAAO,CAAC,EACjC,CAAC,cACNhB,KAAA,QAAK0B,SAAS,CAAC,yBAAyB,CAAAG,QAAA,eACtC/B,IAAA,CAACL,WAAW,EAACiC,SAAS,CAAC,wBAAwB,CAAE,CAAC,cAClD5B,IAAA,SAAA+B,QAAA,CAAO,CAAA3B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEe,WAAW,GAAI,GAAG,CAAO,CAAC,EACpC,CAAC,EAKH,CAAC,EACH,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}